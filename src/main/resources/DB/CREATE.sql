--USUARIOS
CREATE TABLE USUARIOS (
	ID_USUARIO SERIAL PRIMARY KEY,
	NOME VARCHAR(200) NOT NULL,
	EMAIL VARCHAR(200) NOT NULL,
	SENHA VARCHAR(200) NOT NULL,
	TELEFONE VARCHAR(200) NOT NULL,
	ENDERECO VARCHAR(200) NOT NULL,
	ROLE varchar(200) NOT null
)
--DROP TABLE usuarios cascade

SELECT * FROM usuarios

--FOTOGRAFOS
CREATE TABLE FOTOGRAFOS (
	ID_FOTOGRAFO INT NOT NULL,
	ESPECIALIDADE VARCHAR(200) NULL,
	CERTIFICACOES VARCHAR(200) NULL,
	--ID_ALBUM INT NULL,
	FOREIGN KEY (ID_FOTOGRAFO) REFERENCES USUARIOS(ID_USUARIO) ON DELETE cascade
	--FOREIGN KEY (ID_ALBUM) REFERENCES ALBUM(ALBUM_ID)
)

SELECT * FROM fotografos

--CLIENTES
CREATE TABLE CLIENTES (
	ID_CLIENTE INT NOT NULL,
	FOREIGN KEY(ID_CLIENTE) REFERENCES USUARIOS(ID_USUARIO) ON DELETE cascade
)

SELECT * FROM clientes

--ALBUM
CREATE TABLE ALBUM (
	ID_ALBUM SERIAL PRIMARY KEY,
	NOME VARCHAR(200) NOT NULL,
	TIPO_FOTOGRAFIA VARCHAR(200) NOT NULL, -- natureza, casamento, eventos, etc
	TIPO_PACOTE VARCHAR(100) CHECK(TIPO_PACOTE IN('OURO', 'PRATA', 'BRONZE')),
	CURTIDAS INT NOT NULL CHECK (CURTIDAS >= 0),
	FOTOGRAFO_ID INT NOT NULL,
	FOREIGN KEY(FOTOGRAFO_ID) REFERENCES USUARIOS(ID_USUARIO) ON DELETE CASCADE
)
SELECT * FROM album

--FOTOS
CREATE TABLE FOTOS (
	ID_FOTO SERIAL PRIMARY KEY,
	URL VARCHAR(200) NOT NULL,
	DESCRICAO VARCHAR(200) NULL,
	ALBUM_ID INT NOT NULL,
	FOREIGN KEY(ALBUM_ID) REFERENCES ALBUM(ID_ALBUM) ON DELETE cascade
)
DROP TABLE fotos
SELECT * FROM FOTOS

--PAGAMENTOS
CREATE TABLE PAGAMENTOS (
	ID_PAGAMENTO SERIAL PRIMARY KEY,
	VALOR DECIMAL(10,2) CHECK(VALOR > 0.0) NOT NULL,
	TIPO_PAGAMENTO VARCHAR(100) CHECK (TIPO_PAGAMENTO IN('DINHEIRO', 'CARTAO', 'PIX')) NOT NULL,
	STATUS VARCHAR(100) CHECK(STATUS IN('PENDENTE', 'CANCELADO', 'VENCIDO', 'CONCLUIDO')) NOT NULL,
	DATA_CRIACAO DATE NOT NULL,
	DATA_VENCIMENTO DATE NOT NULL,
	CLIENTE_ID INT NOT NULL,
	FOTOGRAFO_ID INT NOT NULL,
	FOREIGN KEY(CLIENTE_ID) REFERENCES USUARIOS(ID_USUARIO),
	FOREIGN KEY(FOTOGRAFO_ID) REFERENCES USUARIOS(ID_USUARIO),
	check(data_vencimento > data_criacao)
)
DROP TABLE pagamentos cascade
SELECT * FROM pagamentos
